[
  {
    "idx": 0,
    "when": 1730843246327,
    "tag": "0000_jittery_mantis",
    "hash": "543852cb27907e8d515d2f2afda16e01edd1a09087e0e3d2c1e5e49a336b333f",
    "sql": [
      "CREATE TABLE `tags_to_tasks` (`tag_id` text NOT NULL,`task_id` text NOT NULL,PRIMARY KEY(`tag_id`, `task_id`),FOREIGN KEY (`tag_id`) REFERENCES `tags`(`id`) ON UPDATE no action ON DELETE cascade,FOREIGN KEY (`task_id`) REFERENCES `tasks`(`id`) ON UPDATE no action ON DELETE cascade);",
      "CREATE TABLE `tags` (`id` text PRIMARY KEY NOT NULL,`label` text NOT NULL,`created_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`updated_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`deleted_at` integer);",
      "CREATE TABLE `tasks` (`id` text PRIMARY KEY NOT NULL,`title` text NOT NULL,`summary` text DEFAULT '' NOT NULL,`created_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`updated_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`deleted_at` integer);",
      "CREATE INDEX `tasks_title_idx` ON `tasks` (`title`);",
      "CREATE INDEX `tasks_summary_idx` ON `tasks` (`summary`);"
    ]
  },
  {
    "idx": 1,
    "when": 1731323500543,
    "tag": "0001_chemical_zuras",
    "hash": "447369c5b8e4f2ef0864a738b592a9f0c4edfbb2b1de4848d280f6dfdb5bdc2e",
    "sql": [
      "CREATE TABLE `custom_frequencies` (`id` text PRIMARY KEY NOT NULL,`schedule_id` text NOT NULL,`type` text GENERATED ALWAYS AS (custom) VIRTUAL NOT NULL,`crons` text NOT NULL,`created_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`updated_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`deleted_at` integer,FOREIGN KEY (`schedule_id`) REFERENCES `schedules`(`id`) ON UPDATE no action ON DELETE cascade);",
      "CREATE UNIQUE INDEX `custom_frequencies_scheduleId_unique` ON `custom_frequencies` (`schedule_id`);",
      "CREATE TABLE `regular_frequencies` (`id` text PRIMARY KEY NOT NULL,`schedule_id` text NOT NULL,`type` text NOT NULL,`created_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`updated_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`deleted_at` integer,FOREIGN KEY (`schedule_id`) REFERENCES `schedules`(`id`) ON UPDATE no action ON DELETE cascade);",
      "CREATE UNIQUE INDEX `regular_frequencies_scheduleId_unique` ON `regular_frequencies` (`schedule_id`);",
      "CREATE TABLE `regular_frequency_exprs` (`id` text PRIMARY KEY NOT NULL,`regular_frequency_id` text NOT NULL,`every` integer NOT NULL,`created_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`updated_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`deleted_at` integer,FOREIGN KEY (`regular_frequency_id`) REFERENCES `regular_frequencies`(`id`) ON UPDATE no action ON DELETE cascade);",
      "CREATE UNIQUE INDEX `regular_frequency_exprs_regularFrequencyId_unique` ON `regular_frequency_exprs` (`regular_frequency_id`);",
      "CREATE TABLE `regular_frequency_monthly_days_subexprs` (`id` text PRIMARY KEY NOT NULL,`regular_frequency_monthly_subexpr_id` text NOT NULL,`days` integer NOT NULL,`created_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`updated_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`deleted_at` integer,FOREIGN KEY (`regular_frequency_monthly_subexpr_id`) REFERENCES `regular_frequency_monthly_subexprs`(`id`) ON UPDATE no action ON DELETE cascade);",
      "CREATE UNIQUE INDEX `regular_frequency_monthly_days_subexprs_regularFrequencyMonthlySubexprId_unique` ON `regular_frequency_monthly_days_subexprs` (`regular_frequency_monthly_subexpr_id`);",
      "CREATE TABLE `regular_frequency_monthly_ordinal_subexprs` (`id` text PRIMARY KEY NOT NULL,`regular_frequency_monthly_subexpr_id` text NOT NULL,`weekday` integer NOT NULL,`ordinal` text NOT NULL,`created_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`updated_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`deleted_at` integer,FOREIGN KEY (`regular_frequency_monthly_subexpr_id`) REFERENCES `regular_frequency_monthly_subexprs`(`id`) ON UPDATE no action ON DELETE cascade);",
      "CREATE UNIQUE INDEX `regular_frequency_monthly_ordinal_subexprs_regularFrequencyMonthlySubexprId_unique` ON `regular_frequency_monthly_ordinal_subexprs` (`regular_frequency_monthly_subexpr_id`);",
      "CREATE TABLE `regular_frequency_monthly_subexprs` (`id` text PRIMARY KEY NOT NULL,`regular_frequency_subexpr_id` text NOT NULL,`type` text NOT NULL,`created_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`updated_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`deleted_at` integer,FOREIGN KEY (`regular_frequency_subexpr_id`) REFERENCES `regular_frequency_subexprs`(`id`) ON UPDATE no action ON DELETE cascade);",
      "CREATE UNIQUE INDEX `regular_frequency_monthly_subexprs_regularFrequencySubexprId_unique` ON `regular_frequency_monthly_subexprs` (`regular_frequency_subexpr_id`);",
      "CREATE TABLE `regular_frequency_subexprs` (`id` text PRIMARY KEY NOT NULL,`regular_frequency_expr_id` text NOT NULL,`created_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`updated_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`deleted_at` integer,FOREIGN KEY (`regular_frequency_expr_id`) REFERENCES `regular_frequencies`(`id`) ON UPDATE no action ON DELETE cascade);",
      "CREATE UNIQUE INDEX `regular_frequency_subexprs_regularFrequencyExprId_unique` ON `regular_frequency_subexprs` (`regular_frequency_expr_id`);",
      "CREATE TABLE `regular_frequency_weekly_subexprs` (`id` text PRIMARY KEY NOT NULL,`regular_frequency_subexpr_id` text NOT NULL,`weekdays` integer NOT NULL,`created_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`updated_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`deleted_at` integer,FOREIGN KEY (`regular_frequency_subexpr_id`) REFERENCES `regular_frequency_subexprs`(`id`) ON UPDATE no action ON DELETE cascade);",
      "CREATE UNIQUE INDEX `regular_frequency_weekly_subexprs_regularFrequencySubexprId_unique` ON `regular_frequency_weekly_subexprs` (`regular_frequency_subexpr_id`);",
      "CREATE TABLE `regular_frequency_yearly_in_subexprs` (`id` text PRIMARY KEY NOT NULL,`regular_frequency_subexpr_id` text NOT NULL,`months` integer NOT NULL,`created_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`updated_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`deleted_at` integer,FOREIGN KEY (`regular_frequency_subexpr_id`) REFERENCES `regular_frequency_subexprs`(`id`) ON UPDATE no action ON DELETE cascade);",
      "CREATE UNIQUE INDEX `regular_frequency_yearly_in_subexprs_regularFrequencySubexprId_unique` ON `regular_frequency_yearly_in_subexprs` (`regular_frequency_subexpr_id`);",
      "CREATE TABLE `regular_frequency_yearly_on_subexprs` (`id` text PRIMARY KEY NOT NULL,`regular_frequency_subexpr_id` text NOT NULL,`variable_weekday` text,`constant_weekday` integer,`ordinal` text NOT NULL,`created_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`updated_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`deleted_at` integer,FOREIGN KEY (`regular_frequency_subexpr_id`) REFERENCES `regular_frequency_subexprs`(`id`) ON UPDATE no action ON DELETE cascade);",
      "CREATE UNIQUE INDEX `regular_frequency_yearly_on_subexprs_regularFrequencySubexprId_unique` ON `regular_frequency_yearly_on_subexprs` (`regular_frequency_subexpr_id`);",
      "CREATE TABLE `schedules` (`id` text PRIMARY KEY NOT NULL,`task_id` text NOT NULL,`anchor_timestamp` integer NOT NULL,`timestamp` integer NOT NULL,`frequency_type` text,`created_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`updated_at` integer DEFAULT (strftime('%s', 'now') || substr(strftime('%f', 'now'), -3)) NOT NULL,`deleted_at` integer,FOREIGN KEY (`task_id`) REFERENCES `tasks`(`id`) ON UPDATE no action ON DELETE cascade);",
      "CREATE UNIQUE INDEX `schedules_taskId_unique` ON `schedules` (`task_id`);"
    ]
  }
]